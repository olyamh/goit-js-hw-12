{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export function createMarkup(images){\n    return images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads}) =>`\n                <li class=\"gallery-item\">\n                    <a href=\"${largeImageURL}\"><img src=\"${webformatURL}\" alt=\"${tags}\" width=\"360\" height=\"152\"/>\n                        <ul class=\"image-descr-list\">\n                            <li class=\"image-descr-item\">Likes: ${likes}</li>\n                            <li class=\"image-descr-item\">Views: ${views}</li>\n                            <li class=\"image-descr-item\">Comments: ${comments}</li>\n                            <li class=\"image-descr-item\">Downloads: ${downloads}</li>\n                        </ul>\n                    </a>\n                </li>\n                `\n            ).join('');\n}\n","import axios from \"axios\";\n\nexport async function needPhotos(url, key, params) {\n    const  {data} = await axios.get(`${url}?key=${key}&${params}`);\n    console.log(\"await data\", data)\n    return data;\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { createMarkup } from './js/render-functions';\nimport { needPhotos } from './js/pixabay-api';\n\n\nconst lightbox = new SimpleLightbox('.gallery-item a', {\n  captionDelay: 250,\n  captions: true,\n  captionsData: 'alt',\n});\n\nlet pageValue=1;\nconst API_KEY = '47534106-2225be5d16534437522f359a0';\nconst params = new URLSearchParams({\n  key: API_KEY,\n  q: '',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  page: 1,\n per_page: 15\n});\nconst BASE_URL = 'https://pixabay.com/api/';\n\n\n\nlet loadMore = document.querySelector('.js-load-more');\nloadMore.classList.replace(\"load-more\", \"load-more-hidden\");\nconst loader = document.querySelector('.loader');\nloader.style.visibility = 'hidden';\nconst gallery = document.querySelector(\".gallery\");\nconst form = document.querySelector('.js-search-form');\nform.addEventListener('submit', function (event) {\n  event.preventDefault();\n  gallery.innerHTML = '';\n  loader.style.visibility = 'visible';\n  loadMore.classList.replace(\"load-more\", \"load-more-hidden\");\n  const input = event.target.querySelector('.search-input');\n  const clientInput = input.value.trim();\n  console.log('input-trim:', clientInput);\n  if (!clientInput) {\n    iziToast.show({\n      messageColor: 'white',\n      backgroundColor: 'red',\n      position: 'topRight',\n      close: true,\n      title: ``,\n      message: 'Please, enter text',\n    });\n    form.reset();\n    return;\n  }\n  params.set('q', clientInput);\n\n  needPhotos(BASE_URL, API_KEY, params)\n    .then(data => {\n\n     \n        if (data.hits.length === 0) {\n        iziToast.show({\n          messageColor: 'white',\n          backgroundColor: 'red',\n          position: 'topRight',\n          close: true,\n          title: '',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n        });\n      } else if (data.hits.length === data.total ){\n        gallery.insertAdjacentHTML(\"beforeend\",createMarkup(data.hits));\n        \n      }  else if(data.hits.length < data.total ) {\n      gallery.insertAdjacentHTML(\"beforeend\", createMarkup(data.hits));\n      loadMore.classList.replace(\"load-more-hidden\", \"load-more\");\n      }\n            \n    lightbox.refresh();\n    loader.style.visibility = 'hidden';\n  })\n    .catch(error =>\n      iziToast.show({\n        messageColor: 'white',\n        backgroundColor: 'red',\n        position: 'topRight',\n        close: true,\n        title: `${error}`,\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      })\n    )\n    .finally(() => form.reset());\n\n    \n});\n\nloadMore.addEventListener('click', function () {\n  loadMore.disable = true;\n  pageValue ++;\n  params.set('page', pageValue);   \n  needPhotos(BASE_URL, API_KEY, params)\n .then (data => {\n  const endOfPhotots = data.total /pageValue;\n  \n  gallery.insertAdjacentHTML(\"beforeend\" ,createMarkup(data.hits));\n  lightbox.refresh();\n  const imageCard = document.querySelector(\".gallery-item\");\n  const imageCardHeight = imageCard.getBoundingClientRect().height;\n  \n  console.log(imageCardHeight);\n  window.scrollBy({\n    left: 0,\n    top: 400,\n    behavior: \"smooth\"\n  })\n\n  if (endOfPhotots <= 15){\n    loadMore.classList.replace(\"load-more\", \"load-more-hidden\");\n    iziToast.show({\n      messageColor: 'white',\n      backgroundColor: 'red',\n      position: 'bottomCenter',\n      close: true,\n      title: ``,\n      message:\n        'Sorry, there are no more images! Please try other query!',\n    })\n  }\n  \n })\n .catch(error =>\n  iziToast.show({\n    messageColor: 'white',\n    backgroundColor: 'red',\n    position: 'topRight',\n    close: true,\n    title: `${error}`,\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n  })\n)\n.finally(() => loadMore.disable = false);\n})"],"names":["createMarkup","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","needPhotos","url","key","params","data","axios","lightbox","SimpleLightbox","pageValue","API_KEY","BASE_URL","loadMore","loader","gallery","form","event","clientInput","iziToast","error","endOfPhotots","imageCardHeight"],"mappings":"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"}